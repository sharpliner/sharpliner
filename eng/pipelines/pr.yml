###
### DO NOT MODIFY THIS FILE!
###
### This YAML was auto-generated from PullRequestPipeline
### To make changes, change the C# definition and rebuild its project
###

trigger:
  batch: true
  branches:
    include:
    - main

pr:
  branches:
    include:
    - main

jobs:
- job: Build
  displayName: Build and test
  pool:
    name: Azure Pipelines
    vmImage: windows-latest
  steps:
  - template: templates/install-dotnet.yml
    parameters:
      version: 6.0.100

  - powershell: |-
      New-Item -Path 'artifacts' -Name 'packages' -ItemType 'directory'
    displayName: Create artifacts/packages

  - task: DotNetCoreCLI@2
    displayName: Build
    inputs:
      command: build
      projects: src/**/*.csproj
      includeNuGetOrg: true

  - script: |-
      dotnet build "eng/Sharpliner.CI/Sharpliner.CI.csproj" -p:FailIfChanged=true
    displayName: Validate YAML has been published

  - task: DotNetCoreCLI@2
    displayName: Test
    inputs:
      command: test
      projects: tests/**/*.csproj
