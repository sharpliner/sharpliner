trigger:
  batch: true
  branches:
    include:
    - main

pr:
  branches:
    include:
    - main

jobs:
  - job: Build
    displayName: Build and test
    pool:
      name: Azure Pipelines
      vmImage: windows-latest

    steps:
    - task: UseDotNet@2
      displayName: Use .NET 5
      inputs:
        packageType: sdk
        version: 6.0.100-preview.3.21202.5

    - task: DotNetCoreCLI@2
      displayName: dotnet build
      inputs:
        command: build
        includeNuGetOrg: true
        projects: Sharpliner.sln

    - task: DotNetCoreCLI@2
      displayName: dotnet test
      inputs:
        command: test
        projects: Sharpliner.sln
